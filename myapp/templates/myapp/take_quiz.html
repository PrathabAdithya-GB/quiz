{% extends "myapp/base.html" %}
{% load static %}

{% block title %}{{ quiz.title }}{% endblock %}

{% block content %}

<h3 class="mb-4">{{ quiz.title }}</h3>

<div class="alert alert-warning text-center fw-bold">
  ‚è± Time left: <span id="timer">{{ quiz.time_limit }}:00</span>
</div>

<form method="post" id="quizForm">
  {% csrf_token %}

  {% for question in questions %}
  <div class="card mb-4 shadow-sm">
    <div class="card-body">

      <p class="fw-semibold">
        {{ forloop.counter }}. {{ question.text }}
        <span class="badge bg-info text-dark ms-2">
          {{ question.difficulty|title }}
        </span>
      </p>

      {% for choice in question.choices.all %}
      <div class="form-check mb-2">
        <input
          class="form-check-input"
          type="{% if question.correct_count > 1 %}checkbox{% else %}radio{% endif %}"
          name="question_{{ question.id }}"
          value="{{ choice.id }}"
          id="q{{ question.id }}_{{ choice.id }}"
        >
        <label class="form-check-label" for="q{{ question.id }}_{{ choice.id }}">
          {{ choice.text }}
        </label>
      </div>
      {% endfor %}

      {% if question.correct_count > 1 %}
      <small class="text-muted">Select all correct answers</small>
      {% endif %}

    </div>
  </div>
  {% endfor %}

  <button type="submit" class="btn btn-success btn-lg w-100">
    Submit Quiz
  </button>
</form>

{% endblock %}

{% block scripts %}
<script src="{% static 'myapp/js/quiz_timer.js' %}"></script>
{% endblock %}
